(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bdc9271"],{"136b":function(e,t,n){"use strict";var a=n("546e"),r=n.n(a);r.a},"29e3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"training"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("search",{on:{searchbtn:e.searchBtn}}),n("el-card",{staticClass:"table-content",style:{height:e.screenHeight}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"user-table-wrap",staticStyle:{width:"100%"},attrs:{data:e.userList,border:"",height:e.scrollHeight}},[n("el-table-column",{attrs:{prop:"num",label:"编号",align:"center",width:"100"}}),n("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),n("el-table-column",{attrs:{align:"center",prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sex?n("span",[e._v("男")]):2==t.row.sex?n("span",[e._v("女")]):e._e()]}}])}),n("el-table-column",{staticClass:"identify",attrs:{align:"center",prop:"identity",label:"身份证","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{align:"center",prop:"address",label:"地址","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.now_p_text)+e._s(t.row.now_c_text)+e._s(t.row.now_d_text)+e._s(t.row.now_address_desc))]}}])}),n("el-table-column",{attrs:{prop:"in_time",align:"center",label:"入职日期",width:"180"}}),n("el-table-column",{attrs:{width:"80",align:"center",prop:"person_state",label:"人员状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.person_state?n("p",[e._v("培训")]):2==t.row.person_state?n("p",[e._v("考核")]):3==t.row.person_state?n("p",[e._v("待岗")]):4==t.row.person_state?n("p",[e._v("离职")]):5==t.row.person_state?n("p",[e._v("黑名单")]):6==t.row.person_state?n("p",[e._v("在岗")]):7==t.row.person_state?n("p",[e._v("离职(下单)")]):n("p",[e._v("错误")])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.lookTrainingBtn(t.row.id,t.row.name)}}},[e._v("查看记录")]),n("el-button",{directives:[{name:"has-power",rawName:"v-has-power",value:{limitList:[1,4,6],role_id:e.$store.state.userInfo.role_id},expression:"{limitList: [1, 4, 6], role_id: $store.state.userInfo.role_id}"}],attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(n){return e.addTraningBtn(t.row.id,t.row.name)}}})]}}])})],1)],1)],1)],1),n("pagination",{attrs:{currentPage:e.currentPage,perpage:e.per_page,total:e.total},on:{handlecurrentchange:e.handleCurrentChange}}),n("el-dialog",{attrs:{title:e.staff_tranings+"的培训记录",visible:e.traningDialogVisible,width:"70%",center:""},on:{"update:visible":function(t){e.traningDialogVisible=t}}},[n("el-table",{staticClass:"looktraining",staticStyle:{width:"100%"},attrs:{height:"500",data:e.trainings,stripe:""}},[n("el-table-column",{attrs:{prop:"time",align:"center",label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(t.row.time.join(" ~ ")))])]}}])}),n("el-table-column",{attrs:{prop:"project",align:"center",label:"培训项目",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.project))])]}}])}),n("el-table-column",{attrs:{prop:"content","show-overflow-tooltip":!0,align:"center",label:"培训内容"}}),n("el-table-column",{attrs:{prop:"address",align:"center",label:"地址"}}),n("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"has-power",rawName:"v-has-power",value:{limitList:[1,4,6],role_id:e.$store.state.userInfo.role_id},expression:"{limitList: [1, 4, 6], role_id: $store.state.userInfo.role_id}"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.editTraningBtn(t.row.id)}}}),n("el-popconfirm",{attrs:{title:"此经历内容确定永远删除吗？"},on:{onConfirm:function(n){return e.deleteTraining(t.row.staff_id,t.row.id)}}},[n("el-button",{directives:[{name:"has-power",rawName:"v-has-power",value:{limitList:[1,4,6],role_id:e.$store.state.userInfo.role_id},expression:"{limitList: [1, 4, 6], role_id: $store.state.userInfo.role_id}"}],staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},slot:"reference"})],1)]}}])})],1)],1),n("el-dialog",{staticClass:"addDialog",attrs:{title:"为"+e.staff_tranings+"添加培训记录",visible:e.addTraningDialogVisible,width:"700px",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addTraningDialogVisible=t},close:e.addTrainingFormClose}},[n("el-form",{ref:"addTrainingForm",staticClass:"trainings",attrs:{model:e.addTrainingForm,"label-width":"100px",rules:e.editTrainingRules}},[n("el-row",[n("el-col",{staticStyle:{height:"200px","line-height":"200px"},attrs:{span:2,align:"center"}}),n("el-col",{attrs:{span:17}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"培训时间",prop:"time"}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.addTrainingForm.time,callback:function(t){e.$set(e.addTrainingForm,"time",t)},expression:"addTrainingForm.time"}})],1)],1)],1),n("el-row",[n("el-form-item",{attrs:{label:"地址",prop:"address"}},[n("el-input",{staticClass:"detail-adress-input",attrs:{size:"mini",placeholder:"详细地址"},model:{value:e.addTrainingForm.address,callback:function(t){e.$set(e.addTrainingForm,"address",t)},expression:"addTrainingForm.address"}})],1),n("el-form-item",{attrs:{label:"培训项目",prop:"project"}},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.addTrainingForm.project,callback:function(t){e.$set(e.addTrainingForm,"project",t)},expression:"addTrainingForm.project"}},e._l(e.jobs,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("el-form-item",{attrs:{label:"培训内容",prop:"content"}},[n("el-input",{staticClass:"content-text",attrs:{type:"textarea",rows:1,placeholder:"请输入内容"},model:{value:e.addTrainingForm.content,callback:function(t){e.$set(e.addTrainingForm,"content",t)},expression:"addTrainingForm.content"}})],1)],1)],1),n("el-col",{staticStyle:{height:"200px","line-height":"200px"},attrs:{span:5}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.addTraningDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveTrainingForm}},[e._v("保 存")])],1)],1),n("el-dialog",{attrs:{title:"修改培训记录",visible:e.editTraningDialogVisible,"append-to-body":"",width:"700px",center:""},on:{"update:visible":function(t){e.editTraningDialogVisible=t},close:e.editDialogClose}},[n("el-form",{ref:"editTrainings",staticClass:"trainings",attrs:{model:e.editTrainings,"label-width":"100px",rules:e.editTrainingRules}},[n("el-row",[n("el-col",{staticStyle:{height:"200px","line-height":"200px"},attrs:{span:2,align:"center"}}),n("el-col",{attrs:{span:17}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"培训时间",prop:"time"}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.editTrainings.time,callback:function(t){e.$set(e.editTrainings,"time",t)},expression:"editTrainings.time"}})],1)],1)],1),n("el-row",[n("el-form-item",{attrs:{label:"地址",prop:"address"}},[n("el-input",{staticClass:"detail-adress-input",attrs:{size:"mini",placeholder:"详细地址"},model:{value:e.editTrainings.address,callback:function(t){e.$set(e.editTrainings,"address",t)},expression:"editTrainings.address"}})],1),n("el-form-item",{attrs:{label:"培训项目",prop:"project"}},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.editTrainings.project,callback:function(t){e.$set(e.editTrainings,"project",t)},expression:"editTrainings.project"}},e._l(e.jobs,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("el-form-item",{attrs:{label:"培训内容",prop:"content"}},[n("el-input",{staticClass:"content-text",attrs:{type:"textarea",rows:1,placeholder:"请输入内容"},model:{value:e.editTrainings.content,callback:function(t){e.$set(e.editTrainings,"content",t)},expression:"editTrainings.content"}})],1)],1)],1),n("el-col",{staticStyle:{height:"200px","line-height":"200px"},attrs:{span:5}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editTraningDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editSaveTraining}},[e._v("保 存")])],1)],1)],1)},r=[],i=n("e34d"),s=n("c1ce"),o=n("9c37"),l=n("e7a1"),c={name:"Training",data:function(){return{searchForm:{},loading:!0,userList:[],currentPage:1,total:null,per_page:null,traningDialogVisible:!1,staff_tranings:"",addTraningDialogVisible:!1,editTraningDialogVisible:!1,jobs:null,trainings:[],addTrainingForm:{staff_id:"",time:[],address:"",project:"",content:""},editTrainings:{staff_id:"",id:"",time:[],address:"",project:"",content:""},editTrainingRules:{time:[{required:!0,message:"请输入日期",trigger:"blur"}],address:[{required:!0,message:"请输详细地址",trigger:"blur"}],project:[{required:!0,message:"请输入培训项",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},computed:{screenHeight:function(){return this.$store.state.screenHeight-210+"px"},scrollHeight:function(){return this.$store.state.screenHeight-260+"px"}},watch:{},methods:{searchAppointData:function(e){var t=this;Object(o["v"])(e).then((function(e){e.code;var n=e.data;e.msg;200===e.code?(t.userList=n.data,t.currentPage=n.current_page,t.total=n.total,t.per_page=n.per_page,t.loading=!1):t.$message.error(e.msg)}))},searchBtn:function(e){this.searchForm=e,this.searchAppointData(this.searchForm)},getUserData:function(){this.loading=!0,this.searchAppointData(this.searchForm)},handleCurrentChange:function(e){this.searchForm.page=e,this.searchAppointData(this.searchForm)},getOneStaffTrainingsData:function(e){var t=this;Object(o["o"])(e).then((function(e){200===e.code?t.trainings=e.data:t.$message.error(e.msg)}))},lookTrainingBtn:function(e,t){this.getOneStaffTrainingsData(e),this.staff_tranings=t,this.traningDialogVisible=!0},editTraningBtn:function(e){var t=this;Object(o["m"])(e).then((function(e){if(200===e.code)for(var n in t.editTrainings)t.editTrainings[n]=e.data[n];else t.$message.error(e.msg)})),this.editTraningDialogVisible=!0},addTraningBtn:function(e,t){this.staff_tranings=t,this.addTraningDialogVisible=!0,this.addTrainingForm.staff_id=e},addTrainingFormClose:function(){this.$refs.addTrainingForm.resetFields()},editDialogClose:function(){this.$refs.editTrainings.resetFields()},saveTrainingForm:function(){var e=this;this.$refs["addTrainingForm"].validate((function(t){t&&Object(o["u"])(e.addTrainingForm).then((function(t){200===t.code?(e.$message.success(t.msg),e.addTraningDialogVisible=!1):e.$message.error(t.msg)}))}))},editSaveTraining:function(){var e=this;this.$refs["editTrainings"].validate((function(t){t&&Object(o["x"])(e.editTrainings).then((function(t){200===t.code?(e.$message.success(t.msg),e.editTraningDialogVisible=!1,e.getOneStaffTrainingsData(e.editTrainings.staff_id)):e.$message.error(t.msg)}))}))},deleteTraining:function(e,t){var n=this,a=[t];Object(o["g"])(a).then((function(t){200===t.code?(n.$message.success(t.msg),n.getOneStaffTrainingsData(e)):n.$message.error(t.msg)}))}},components:{Search:i["a"],Pagination:s["a"]},created:function(){var e=this;this.getUserData(),Object(l["h"])().then((function(t){200===t.code?e.jobs=t.data:e.$message.waraing("获取岗位失败！")}))}},d=c,u=(n("136b"),n("2877")),p=Object(u["a"])(d,a,r,!1,null,"1f235718",null);t["default"]=p.exports},"546e":function(e,t,n){},9385:function(e,t,n){"use strict";var a=n("ac49"),r=n.n(a);r.a},ac49:function(e,t,n){},e34d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("el-card",{staticClass:"search-wrap"},[n("el-form",{ref:"searchForm",attrs:{size:"small",inline:!0,model:e.searchForm}},[n("el-row",[n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"num"}},[n("el-input",{attrs:{size:"mini",placeholder:"员工编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBtn(t)}},model:{value:e.searchForm.num,callback:function(t){e.$set(e.searchForm,"num",t)},expression:"searchForm.num"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{size:"mini",placeholder:"姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBtn(t)}},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"mobile"}},[n("el-input",{attrs:{size:"mini",placeholder:"手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBtn(t)}},model:{value:e.searchForm.mobile,callback:function(t){e.$set(e.searchForm,"mobile",t)},expression:"searchForm.mobile"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"identity"}},[n("el-input",{attrs:{size:"mini",placeholder:"身份证号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBtn(t)}},model:{value:e.searchForm.identity,callback:function(t){e.$set(e.searchForm,"identity",t)},expression:"searchForm.identity"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"person_state"}},[n("el-select",{attrs:{size:"mini",placeholder:"员工状态"},on:{change:e.searchBtn},model:{value:e.searchForm.person_state,callback:function(t){e.$set(e.searchForm,"person_state",t)},expression:"searchForm.person_state"}},[n("el-option",{attrs:{label:"培训",value:"1"}}),n("el-option",{attrs:{label:"待岗",value:"3"}}),n("el-option",{attrs:{label:"离职",value:"4"}}),n("el-option",{attrs:{label:"黑名单",value:"5"}}),n("el-option",{attrs:{label:"在岗",value:"6"}}),n("el-option",{attrs:{label:"离职（下单）",value:"7"}})],1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",[n("el-date-picker",{staticClass:"select-date",staticStyle:{width:"250px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"mini"},on:{change:e.searchBtn},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"handle"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchBtn}},[e._v("搜索")])],1)],1),n("el-col",{attrs:{span:10}},[n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearBtn}},[e._v("清除")])],1)],1)],1)],1)],1)],1)],1)},r=[],i=(n("a15b"),n("159f"),{name:"Search",data:function(){return{searchForm:{num:"",name:"",mobile:"",identity:"",person_state:"",create_time:""},time:[]}},methods:{clearBtn:function(){this.$refs.searchForm.resetFields(),this.time=[],this.searchBtn()},searchBtn:function(){this.searchForm.create_time=this.time.join(","),console.log(this.searchForm),this.$emit("searchbtn",this.searchForm)}},created:function(){}}),s=i,o=(n("9385"),n("2877")),l=Object(o["a"])(s,a,r,!1,null,"7a593098",null);t["a"]=l.exports},e7a1:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"j",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return f}));n("bc3a");var a=n("1bab");function r(){return Object(a["a"])({url:"/region/province",method:"get"})}function i(e){return Object(a["a"])({url:"/region/city",method:"get",params:{parent_id:e}})}function s(e){return Object(a["a"])({url:"/region/district",method:"get",params:{parent_id:e}})}function o(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:1}})}function l(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:2}})}function c(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:3}})}function d(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:4}})}function u(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:5}})}function p(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:6}})}function m(){return Object(a["a"])({url:"/information/index",method:"get",params:{category_id:7}})}function g(){return Object(a["a"])({url:"/customer/create",method:"get"})}function f(){return Object(a["a"])({url:"/source/index",method:"get"})}}}]);
//# sourceMappingURL=chunk-2bdc9271.1f007c73.js.map